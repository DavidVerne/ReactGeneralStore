{"version":3,"sources":["components/Cart/Cart.module.css","components/Cart/CartItem.module.css","components/Cart/Discount.module.css","components/Layout/HeaderCartButton.module.css","components/Items/ShoppingItem/ShoppingItem.module.css","components/UI/Modal.module.css","components/Layout/Header.module.css","components/Items/AvailableItems.module.css","components/UI/Card.module.css","components/Items/ShoppingItem/ShoppingItemForm.module.css","components/UI/Input.module.css","components/Items/ItemsSummary.module.css","assets/shopping.jpg","components/Cart/CartIcon.js","store/CartContext.js","components/Layout/HeaderCartButton.js","components/Layout/Header.js","components/UI/Card.js","components/UI/Input.js","components/Items/ShoppingItem/ShoppingItemForm.js","components/Items/ShoppingItem/ShoppingItem.js","components/Items/AvailableItems.js","components/Items/ItemsSummary.js","components/Items/Items.js","components/UI/Modal.js","components/Cart/CartItem.js","components/Cart/Discount.js","components/Cart/Cart.js","store/CartProvider.js","App.js","index.js"],"names":["module","exports","CartIcon","xmlns","viewBox","fill","d","CartContext","React","createContext","items","totalAmount","HeaderCartButton","props","numberOfCartItems","useContext","reduce","currentNumber","item","amount","className","classes","button","onClick","icon","badge","Header","header","onShowCart","src","shoppingImage","alt","Card","card","children","Input","forwardRef","ref","input","htmlFor","id","label","ShoppingItemForm","useState","amountIsValid","setAmountIsValid","amountInputRef","useRef","form","onSubmit","event","preventDefault","enteredAmount","current","value","enteredAmountNumber","trim","length","onAddToCart","type","min","max","step","defaultValue","ShoppingItem","cartCx","price","toFixed","grocery","name","description","addItem","discount","totalPrice","DUMMY_ITEMS","AvailableItems","itemsList","map","ItemsSummary","summary","Items","Backdrop","backdrop","onClose","ModalOverlay","modal","content","portalElement","document","getElementById","Modal","ReactDOM","createPortal","CartItem","discountTotal","totalCost","summarybox","discountedTotal","Discount","Cart","cartCtx","finalAmount","finalAmountState","setFinalAmount","discountToken","applyDiscountToken","hasItems","CartItems","Discounts","NoDiscounts","console","log","i","CheckForDiscounts","voucher","total","actions","defaultCartState","cartReducer","state","action","updatedItems","updatedTotalAmount","exisitingCartItemIndex","findIndex","existingCartItem","updatedItem","concat","CartProvider","useReducer","cartState","dispatchCartAction","cartContext","removeItem","Provider","App","cartIsShown","setCartIsShown","render"],"mappings":"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","file":"static/js/main.d61dc616.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-items\":\"Cart_cart-items__3J_Zx\",\"total\":\"Cart_total__2E7Fn\",\"discountedTotal\":\"Cart_discountedTotal__2Spk7\",\"d-cart-item\":\"Cart_d-cart-item__1lxq3\",\"d-cart-box\":\"Cart_d-cart-box__Xtx54\",\"summarybox\":\"Cart_summarybox__1_E6q\",\"discountVoucher\":\"Cart_discountVoucher__3zmRu\",\"actions\":\"Cart_actions__10Eli\",\"button--alt\":\"Cart_button--alt__jmRde\",\"button\":\"Cart_button__ECpxm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-item\":\"CartItem_cart-item__2cldA\",\"cart-box\":\"CartItem_cart-box__1AlqR\",\"summarybox\":\"CartItem_summarybox__3ubMT\",\"summary\":\"CartItem_summary__IO3eI\",\"price\":\"CartItem_price__1XcO_\",\"discountedTotal\":\"CartItem_discountedTotal__3RA8a\",\"totalCost\":\"CartItem_totalCost__3HL7H\",\"amount\":\"CartItem_amount__34q2D\",\"actions\":\"CartItem_actions__3U3-M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"d-cart-item\":\"Discount_d-cart-item__cojh5\",\"d-cart-box\":\"Discount_d-cart-box__wKeS2\",\"summarybox\":\"Discount_summarybox__3zT_s\",\"cart-item\":\"Discount_cart-item__27-W4\",\"summary\":\"Discount_summary__1Zs3u\",\"price\":\"Discount_price__1K21e\",\"discountedTotal\":\"Discount_discountedTotal__3KRkR\",\"totalCost\":\"Discount_totalCost__1e7b9\",\"amount\":\"Discount_amount__2WH9W\",\"actions\":\"Discount_actions__3rUh0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"HeaderCartButton_button__1cdGj\",\"icon\":\"HeaderCartButton_icon__-pghm\",\"badge\":\"HeaderCartButton_badge__2zbKN\",\"bump\":\"HeaderCartButton_bump__2i8Fh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grocery\":\"ShoppingItem_grocery__3tZjK\",\"description\":\"ShoppingItem_description__35imB\",\"price\":\"ShoppingItem_price__iUG4r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__SgbAK\",\"modal\":\"Modal_modal__3x9mK\",\"slide-down\":\"Modal_slide-down__1LPEz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1OQza\",\"main-image\":\"Header_main-image__x6sya\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"items\":\"AvailableItems_items__2pD7I\",\"items-appear\":\"AvailableItems_items-appear__3BMv8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__3kuau\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ShoppingItemForm_form__35Uwg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input_input__1lCZU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"summary\":\"ItemsSummary_summary__1-ngc\"};","export default __webpack_public_path__ + \"static/media/shopping.9a6a8878.jpg\";","const CartIcon = () => {\r\n    return (\r\n      <svg\r\n        xmlns='http://www.w3.org/2000/svg'\r\n        viewBox='0 0 20 20'\r\n        fill='currentColor'\r\n      >\r\n        <path d='M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z' />\r\n      </svg>\r\n    );\r\n  };\r\n  \r\n  export default CartIcon;","import React from 'react';\r\n\r\n{/* used for managing cart state */}\r\n\r\nconst CartContext = React.createContext({\r\n    items: [],\r\n    totalAmount: 0,\r\n});\r\n\r\nexport default CartContext;","import CartIcon from '../Cart/CartIcon';\r\nimport classes from './HeaderCartButton.module.css';\r\nimport { useContext } from 'react';\r\nimport CartContext from '../../store/CartContext';\r\n\r\nconst HeaderCartButton = props => {\r\n\r\n    const cartCtx = useContext(CartContext); // updates everytime CartContext updates\r\n\r\n    const numberOfCartItems = cartCtx.items.reduce((currentNumber, item) => {\r\n        return currentNumber + item.amount;\r\n    }, 0); // reduce transforms array into single number\r\n\r\n    return <button className={classes.button} onClick={props.onClick}>\r\n        <span className={classes.icon}>\r\n            <CartIcon />\r\n        </span>\r\n        <span>Your Cart</span>\r\n        <span className={classes.badge}>\r\n        {numberOfCartItems}\r\n        </span>\r\n    </button>\r\n};\r\n\r\nexport default HeaderCartButton;","import React, { Fragment } from \"react\";\r\nimport shoppingImage from '../../assets/shopping.jpg';\r\nimport classes from './Header.module.css';\r\nimport HeaderCartButton from \"./HeaderCartButton\";\r\n\r\nconst Header = props => {\r\n    return <Fragment> \r\n        <header className={classes.header}> \r\n            <h1>General Store</h1>\r\n            <HeaderCartButton onClick={props.onShowCart} />\r\n        </header>\r\n        <div className={classes['main-image']}>\r\n            <img src={shoppingImage} alt=\"a shopping cart\" />\r\n        </div>\r\n    </Fragment>\r\n};\r\n\r\nexport default Header;","import classes from './Card.module.css';\r\n\r\n// general wrapper component\r\nconst Card = props => {\r\n    return <div className={classes.card}>{props.children}</div>\r\n};\r\n\r\nexport default Card;","import React from 'react';\r\nimport classes from './Input.module.css';\r\n\r\n// wrapping entire component in a ref\r\nconst Input = React.forwardRef((props, ref) => { {/* component is now an argument for forwardRef / ref added as second paramenter */}\r\n    return <div className={classes.input}>\r\n        <label htmlFor={props.input.id}>{props.label}</label>\r\n        <input ref={ref} {...props.input} /> {/* ... ensures all key/value pairs in this object are added as props to input*/}\r\n    </div>\r\n});\r\n\r\nexport default Input;","import classes from './ShoppingItemForm.module.css';\r\nimport Input from '../../UI/Input';\r\nimport { useRef, useState } from 'react';\r\n\r\nconst ShoppingItemForm = props => {\r\n    const [amountIsValid, setAmountIsValid] = useState(true); \r\n\r\n    const amountInputRef = useRef();\r\n\r\n    // function for sending form data \r\n    const submitHandler = event => {\r\n            event.preventDefault();\r\n\r\n            const enteredAmount = amountInputRef.current.value; // value is always a string\r\n            const enteredAmountNumber = +enteredAmount; // converts string to number\r\n\r\n            if (enteredAmount.trim().length === 0 || enteredAmountNumber < 1 || enteredAmountNumber > 5) { // validation\r\n                setAmountIsValid(false);\r\n                return;\r\n            }\r\n\r\n            props.onAddToCart(enteredAmountNumber);\r\n    };\r\n\r\n    return <form className={classes.form} onSubmit={submitHandler}>\r\n        <Input\r\n        ref={amountInputRef}\r\n        label=\"Amount\" \r\n        input={{ \r\n            id: 'amount_' + props.id,\r\n            type: 'number',\r\n            min: '1',\r\n            max: '1',\r\n            step: '1',\r\n            defaultValue: '1'\r\n        }} />\r\n        <button>+ Add</button>\r\n        {!amountIsValid && <p>Please enter a valid amount (1-5).</p>}\r\n    </form>\r\n};\r\n\r\nexport default ShoppingItemForm;","import { useContext } from 'react';\r\nimport classes from './ShoppingItem.module.css';\r\nimport ShoppingItemForm from './ShoppingItemForm';\r\nimport CartContext from '../../../store/CartContext';\r\n\r\nconst ShoppingItem = props => {\r\n    const cartCx = useContext(CartContext);\r\n    const price = `£${props.price.toFixed(2)}`; \r\n\r\n    const addItemToCartHandler = amount => {\r\n        cartCx.addItem({\r\n            id: props.id,\r\n            name: props.name,\r\n            amount: amount,\r\n            price: props.price,\r\n            discount: props.discount,\r\n            totalPrice: props.totalPrice,\r\n        });\r\n    };\r\n\r\n    return (\r\n    <li className={classes.grocery}>\r\n        <div>\r\n            <h3>{props.name}</h3>\r\n            <div className={classes.description}>{props.description}</div>\r\n            <div className={classes.price}>{price}</div>\r\n        </div>\r\n        <div>\r\n            <ShoppingItemForm id={props.id}  onAddToCart={addItemToCartHandler} />\r\n        </div>\r\n    </li>\r\n    );\r\n};\r\n\r\nexport default ShoppingItem;","import React from 'react';\r\nimport classes from './AvailableItems.module.css';\r\nimport Card from '../UI/Card';\r\nimport ShoppingItem from './ShoppingItem/ShoppingItem';\r\n\r\n{/* dummy data */}\r\n\r\nconst DUMMY_ITEMS = [\r\n    {\r\n      id: 'm1',\r\n      name: 'Apples',\r\n      description: 'per bag',\r\n      price: 1.00,\r\n      discount: 0.10,\r\n    },\r\n    {\r\n      id: 'm2',\r\n      name: 'Bread',\r\n      description: 'per loaf',\r\n      price: 0.80,\r\n      discount: 0,\r\n    },\r\n    {\r\n      id: 'm3',\r\n      name: 'Milk',\r\n      description: 'per 500ml',\r\n      price: 1.30,\r\n      discount: 0,\r\n    },\r\n    {\r\n      id: 'm4',\r\n      name: 'Soup',\r\n      description: 'per tin',\r\n      price: 0.65,\r\n      discount: 0,\r\n    },\r\n  ];\r\n\r\nconst AvailableItems = () => { \r\n  const itemsList = DUMMY_ITEMS.map(item => \r\n  <ShoppingItem \r\n  id={item.id} \r\n  key={item.id} \r\n  name={item.name} \r\n  description={item.description} \r\n  price={item.price}\r\n  discount={item.discount}\r\n  />); {/* converting dummy data into jsx elements */}\r\n\r\n  return <section className={classes.items}>\r\n      <Card>\r\n      <ul>\r\n          {itemsList}\r\n      </ul>\r\n      </Card>\r\n  </section>\r\n}\r\n\r\nexport default AvailableItems;","import classes from './ItemsSummary.module.css';\r\n\r\nconst ItemsSummary = () => {\r\n    return (\r\n        <section className={classes.summary}>\r\n            <h2>Thanks for shopping at the worlds best supermarket</h2>\r\n            <p>Choose from your favourite brands.</p>\r\n            <p>And have a great day!</p>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default ItemsSummary;","import { Fragment } from \"react\";\r\nimport AvailableItems from './AvailableItems';\r\nimport ItemsSummary from './ItemsSummary';\r\n\r\nconst Items = () => {\r\n    return (\r\n        <Fragment>\r\n            <ItemsSummary />\r\n            <AvailableItems />\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default Items;","import classes from './Modal.module.css';\r\nimport React, { Fragment } from \"react\";\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst Backdrop = props => {\r\n    return <div className={classes.backdrop} onClick={props.onClose}/>\r\n};\r\n\r\nconst ModalOverlay = (props) => {\r\n    return <div className={classes.modal}>\r\n        <div className={classes.content}>{props.children}</div> {/* children of component on which modal is being used */}\r\n    </div>\r\n};\r\n\r\nconst portalElement = document.getElementById('overlays'); {/* from index.html */}\r\n\r\nconst Modal = props => {\r\n    return <Fragment>\r\n        {ReactDOM.createPortal(<Backdrop onClose={props.onClose}/>, portalElement)}\r\n        {ReactDOM.createPortal(<ModalOverlay>{props.children}</ModalOverlay>, portalElement)}\r\n    </Fragment>\r\n};\r\n\r\nexport default Modal;","import classes from './CartItem.module.css';\r\n\r\nconst CartItem = (props) => {\r\n  const price = `Subtotal: £${(props.price * props.amount).toFixed(2)}`;\r\n  let discountTotal;\r\n  let totalCost;\r\n\r\n  if (props.discount !== 0) {\r\n    discountTotal = `${props.name} ${(props.discount) * 100}% off: - £${(props.discount * props.amount).toFixed(2)}`;\r\n    totalCost = `Total price: £${((props.price * props.amount) - (props.discount * props.amount)).toFixed(2)}`;\r\n  } else {\r\n    discountTotal = '(No offers available)';\r\n    totalCost = `Total price: £${(props.price * props.amount).toFixed(2)}`;\r\n  }\r\n\r\n\r\n  return (\r\n    <li className={classes['cart-item']}>\r\n      <div className={classes['cart-box']}>\r\n        <h2>{props.name}</h2>\r\n        <div className={classes.summary}>\r\n        <div className={classes.summarybox}>\r\n          <span className={classes.price}>{price}</span>\r\n          <span className={classes.discountedTotal}>{discountTotal}</span>\r\n          <span className={classes.totalCost}>{totalCost}</span>\r\n        </div>\r\n          <span className={classes.amount}>x {props.amount}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n","import classes from './Discount.module.css';\r\n\r\nconst Discount= (props) => {\r\n\r\n  let discountTotal;\r\n\r\n  if (props.discount !== 0) {\r\n    discountTotal = `${props.name} ${(props.discount) * 100}% off: - £${(props.discount * props.amount).toFixed(2)}`;\r\n  } \r\n\r\n\r\n  return (\r\n    <li className={classes['d-cart-item']}>\r\n      <div className={classes['d-cart-box']}>\r\n        <div className={classes.summarybox}>\r\n          <span className={classes.discountedTotal}>{discountTotal}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Discount;","import { useState, useEffect, useContext } from 'react';\r\nimport classes from './Cart.module.css';\r\nimport Modal from '../UI/Modal';\r\nimport CartContext from '../../store/CartContext';\r\nimport CartItem from './CartItem';\r\nimport Discount from './Discount';\r\n\r\nconst Cart = props => {\r\n\r\n    const cartCtx = useContext(CartContext);\r\n    \r\n    let finalAmount = cartCtx.totalAmount.toFixed(2);\r\n\r\n    const [finalAmountState, setFinalAmount] = useState(finalAmount); // set finalAmountState to finalAmount as a starting value\r\n\r\n    const [discountToken, applyDiscountToken] = useState(true); // apply discount only once \r\n\r\n      const ApplyDiscount = () => {\r\n          if (discountToken) {\r\n            setFinalAmount((finalAmountState - 0.50).toFixed(2));\r\n          };\r\n          applyDiscountToken(false);\r\n      }\r\n\r\n    const hasItems = cartCtx.items.length > 0;\r\n\r\n    const CartItems = (\r\n        <ul className={classes['cart-items']}>\r\n            {\r\n                cartCtx.items.map((item) => (\r\n                    <CartItem \r\n                    key={item.id} \r\n                    name={item.name} \r\n                    amount={item.amount} \r\n                    price={item.price}\r\n                    discount={item.discount}\r\n                    />\r\n                ))\r\n            }\r\n        </ul>\r\n    );\r\n\r\n    const Discounts = (\r\n        <ul className={classes['cart-items']}>\r\n            {\r\n                cartCtx.items.map((item) => (\r\n\r\n                       <Discount \r\n                        key={item.id} \r\n                        name={item.name} \r\n                        amount={item.amount} \r\n                        price={item.price}\r\n                        discount={item.discount}\r\n                        />\r\n                ))\r\n            }\r\n        </ul>\r\n    );\r\n\r\n    const NoDiscounts = (\r\n        <ul className={classes['cart-items']}>\r\n            <li className={classes['d-cart-item']}>\r\n                <div className={classes['d-cart-box']}>\r\n                    <div className={classes.summarybox}>\r\n                    <span className={classes.discountedTotal}>{'(No offers available)'}</span>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    );\r\n\r\n    console.log('cartCtx.items: ', cartCtx.items);\r\n\r\n    const CheckForDiscounts = () => {\r\n        console.log(\"Checking for discounts\");\r\n        for (let i = 0; i < cartCtx.items.length; i++)\r\n        {\r\n            if (cartCtx.items[i].discount != 0) {\r\n                return true;\r\n            }\r\n\r\n        }\r\n        return false;\r\n    }; \r\n\r\n\r\n    return (\r\n        <Modal onClose={props.onClose}>\r\n            {CartItems}\r\n            {CheckForDiscounts() ? <div>{Discounts}</div> : <div>{NoDiscounts}</div>}\r\n            <div className={classes.voucher}>\r\n            {hasItems && <button className={classes['discountVoucher']} onClick={ApplyDiscount}>Apply Discount Token</button>}\r\n            </div>\r\n            <div className={classes.total}>\r\n                <span>Total Amount</span>\r\n                <span>£{finalAmountState}</span>\r\n            </div>\r\n            <div className={classes.actions}>\r\n                <button className={classes['button--alt']} onClick={props.onClose}>Close</button>\r\n                {hasItems && <button className={classes.button}>Buy</button>}\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default Cart;","import CartContext from './CartContext';\r\nimport { useReducer } from 'react'; \r\n\r\nconst defaultCartState = {\r\n    items: [],\r\n    totalAmount: 0,\r\n};\r\n\r\n{/* recieves state and action */}\r\nconst cartReducer = (state, action) => {\r\n    if (action.type === 'ADD') {\r\n\r\n        const updatedTotalAmount = state.totalAmount + (action.item.price - (action.item.discount * action.item.amount)) * action.item.amount;\r\n        \r\n        {/* check if item already in cart */}\r\n        const exisitingCartItemIndex = state.items.findIndex((item) => item.id === action.item.id);\r\n\r\n        const existingCartItem = state.items[exisitingCartItemIndex]; {/* existing item set to item in array */}\r\n        \r\n        let updatedItems;\r\n\r\n        if (existingCartItem) {\r\n            const updatedItem = {\r\n                ...existingCartItem,\r\n                amount: existingCartItem.amount + action.item.amount,\r\n            };\r\n            updatedItems = [...state.items];\r\n            updatedItems[exisitingCartItemIndex] = updatedItem;\r\n        } else {\r\n            updatedItems = state.items.concat(action.item);\r\n        }\r\n\r\n        return {\r\n            items: updatedItems,\r\n            totalAmount: updatedTotalAmount,\r\n        }; {/* return new state snapshot */}\r\n    }\r\n    return defaultCartState;\r\n};\r\n\r\nconst CartProvider = (props) => {\r\n\r\n    const [cartState, dispatchCartAction] = useReducer(cartReducer, defaultCartState); {/* set initial state */} \r\n\r\n    const addItemToCartHandler = (item) => {\r\n        dispatchCartAction({type: 'ADD', item: item});\r\n    };\r\n\r\n    const removeItemFromCartHandler = (id) => {\r\n        dispatchCartAction({type: 'REMOVE', id: id});\r\n    };\r\n\r\n    const cartContext = {\r\n        items: cartState.items,\r\n        totalAmount: cartState.totalAmount,\r\n        addItem: addItemToCartHandler,\r\n        removeItem: removeItemFromCartHandler\r\n    };\r\n\r\n    return <CartContext.Provider value={cartContext}>\r\n        {props.children}\r\n    </CartContext.Provider>\r\n};\r\n\r\nexport default CartProvider;","import React, { useState } from 'react';\r\nimport Header from './components/Layout/Header';\r\nimport Items from './components/Items/Items';\r\nimport Cart from './components/Cart/Cart';\r\nimport CartProvider from './store/CartProvider';\r\n\r\nfunction App() {\r\n  const [cartIsShown, setCartIsShown] = useState(false); \r\n\r\n  const showCartHandler = () => {\r\n    setCartIsShown(true);\r\n  };\r\n\r\n  const hideCartHandler = () => {\r\n    setCartIsShown(false);\r\n  };\r\n\r\n  return (\r\n    <CartProvider>\r\n      {cartIsShown && <Cart onClose={hideCartHandler} />} \r\n      <Header onShowCart={showCartHandler} /> \r\n      <main>\r\n        <Items />\r\n      </main>\r\n    </CartProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import ReactDOM from 'react-dom';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}