(this.webpackJsonpgeneral_store=this.webpackJsonpgeneral_store||[]).push([[0],[,,function(t,e,c){t.exports={"cart-items":"Cart_cart-items__3J_Zx",total:"Cart_total__2E7Fn",discountedTotal:"Cart_discountedTotal__2Spk7","d-cart-item":"Cart_d-cart-item__1lxq3","d-cart-box":"Cart_d-cart-box__Xtx54",summarybox:"Cart_summarybox__1_E6q",discountVoucher:"Cart_discountVoucher__3zmRu",actions:"Cart_actions__10Eli","button--alt":"Cart_button--alt__jmRde",button:"Cart_button__ECpxm"}},,function(t,e,c){t.exports={"cart-item":"CartItem_cart-item__2cldA","cart-box":"CartItem_cart-box__1AlqR",summarybox:"CartItem_summarybox__3ubMT",summary:"CartItem_summary__IO3eI",price:"CartItem_price__1XcO_",discountedTotal:"CartItem_discountedTotal__3RA8a",totalCost:"CartItem_totalCost__3HL7H",amount:"CartItem_amount__34q2D",actions:"CartItem_actions__3U3-M"}},,,,function(t,e,c){t.exports={"d-cart-item":"Discount_d-cart-item__cojh5","d-cart-box":"Discount_d-cart-box__wKeS2",summarybox:"Discount_summarybox__3zT_s","cart-item":"Discount_cart-item__27-W4",summary:"Discount_summary__1Zs3u",price:"Discount_price__1K21e",discountedTotal:"Discount_discountedTotal__3KRkR",totalCost:"Discount_totalCost__1e7b9",amount:"Discount_amount__2WH9W",actions:"Discount_actions__3rUh0"}},,function(t,e,c){t.exports={button:"HeaderCartButton_button__1cdGj",icon:"HeaderCartButton_icon__-pghm",badge:"HeaderCartButton_badge__2zbKN",bump:"HeaderCartButton_bump__2i8Fh"}},function(t,e,c){t.exports={grocery:"ShoppingItem_grocery__3tZjK",description:"ShoppingItem_description__35imB",price:"ShoppingItem_price__iUG4r"}},function(t,e,c){t.exports={backdrop:"Modal_backdrop__SgbAK",modal:"Modal_modal__3x9mK","slide-down":"Modal_slide-down__1LPEz"}},,function(t,e,c){t.exports={header:"Header_header__1OQza","main-image":"Header_main-image__x6sya"}},function(t,e,c){t.exports={items:"AvailableItems_items__2pD7I","items-appear":"AvailableItems_items-appear__3BMv8"}},function(t,e,c){t.exports={card:"Card_card__3kuau"}},function(t,e,c){t.exports={form:"ShoppingItemForm_form__35Uwg"}},function(t,e,c){t.exports={input:"Input_input__1lCZU"}},function(t,e,c){t.exports={summary:"ItemsSummary_summary__1-ngc"}},,,,,,function(t,e,c){},,function(t,e,c){"use strict";c.r(e);var n=c(5),a=c.n(n),s=(c(25),c(3)),i=c(1),o=c.n(i),r=c.p+"static/media/shopping.9a6a8878.jpg",d=c(14),m=c.n(d),u=c(0),l=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(u.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},j=c(10),b=c.n(j),_=o.a.createContext({items:[],totalAmount:0}),x=function(t){var e=Object(i.useContext)(_).items.reduce((function(t,e){return t+e.amount}),0);return Object(u.jsxs)("button",{className:b.a.button,onClick:t.onClick,children:[Object(u.jsx)("span",{className:b.a.icon,children:Object(u.jsx)(l,{})}),Object(u.jsx)("span",{children:"Your Cart"}),Object(u.jsx)("span",{className:b.a.badge,children:e})]})},p=function(t){return Object(u.jsxs)(i.Fragment,{children:[Object(u.jsxs)("header",{className:m.a.header,children:[Object(u.jsx)("h1",{children:"General Store"}),Object(u.jsx)(x,{onClick:t.onShowCart})]}),Object(u.jsx)("div",{className:m.a["main-image"],children:Object(u.jsx)("img",{src:r,alt:"a shopping cart"})})]})},h=c(15),O=c.n(h),f=c(16),C=c.n(f),v=function(t){return Object(u.jsx)("div",{className:C.a.card,children:t.children})},N=c(11),g=c.n(N),y=c(17),I=c.n(y),A=c(7),k=c(18),D=c.n(k),S=o.a.forwardRef((function(t,e){return Object(u.jsxs)("div",{className:D.a.input,children:[Object(u.jsx)("label",{htmlFor:t.input.id,children:t.label}),Object(u.jsx)("input",Object(A.a)({ref:e},t.input))," "]})})),T=function(t){var e=Object(i.useState)(!0),c=Object(s.a)(e,2),n=c[0],a=c[1],o=Object(i.useRef)();return Object(u.jsxs)("form",{className:I.a.form,onSubmit:function(e){e.preventDefault();var c=o.current.value,n=+c;0===c.trim().length||n<1||n>5?a(!1):t.onAddToCart(n)},children:[Object(u.jsx)(S,{ref:o,label:"Amount",input:{id:"amount_"+t.id,type:"number",min:"1",max:"1",step:"1",defaultValue:"1"}}),Object(u.jsx)("button",{children:"+ Add"}),!n&&Object(u.jsx)("p",{children:"Please enter a valid amount (1-5)."})]})},w=function(t){var e=Object(i.useContext)(_),c="\xa3".concat(t.price.toFixed(2));return Object(u.jsxs)("li",{className:g.a.grocery,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:t.name}),Object(u.jsx)("div",{className:g.a.description,children:t.description}),Object(u.jsx)("div",{className:g.a.price,children:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)(T,{id:t.id,onAddToCart:function(c){e.addItem({id:t.id,name:t.name,amount:c,price:t.price,discount:t.discount,totalPrice:t.totalPrice})}})})]})},F=[{id:"m1",name:"Apples",description:"per bag",price:1,discount:.1},{id:"m2",name:"Bread",description:"per loaf",price:.8,discount:0},{id:"m3",name:"Milk",description:"per 500ml",price:1.3,discount:0},{id:"m4",name:"Soup",description:"per tin",price:.65,discount:0}],H=function(){var t=F.map((function(t){return Object(u.jsx)(w,{id:t.id,name:t.name,description:t.description,price:t.price,discount:t.discount},t.id)}));return Object(u.jsx)("section",{className:O.a.items,children:Object(u.jsx)(v,{children:Object(u.jsx)("ul",{children:t})})})},B=c(19),M=c.n(B),R=function(){return Object(u.jsxs)("section",{className:M.a.summary,children:[Object(u.jsx)("h2",{children:"Thanks for shopping at the worlds best supermarket"}),Object(u.jsx)("p",{children:"Choose from your favourite brands."}),Object(u.jsx)("p",{children:"And have a great day!"})]})},E=function(){return Object(u.jsxs)(i.Fragment,{children:[Object(u.jsx)(R,{}),Object(u.jsx)(H,{})]})},z=c(2),K=c.n(z),P=c(12),U=c.n(P),V=function(t){return Object(u.jsx)("div",{className:U.a.backdrop,onClick:t.onClose})},q=function(t){return Object(u.jsxs)("div",{className:U.a.modal,children:[Object(u.jsx)("div",{className:U.a.content,children:t.children})," "]})},Z=document.getElementById("overlays"),G=function(t){return Object(u.jsxs)(i.Fragment,{children:[a.a.createPortal(Object(u.jsx)(V,{onClose:t.onClose}),Z),a.a.createPortal(Object(u.jsx)(q,{children:t.children}),Z)]})},J=c(4),W=c.n(J),L=function(t){var e,c,n="Subtotal: \xa3".concat((t.price*t.amount).toFixed(2));return 0!==t.discount?(e="".concat(t.name," ").concat(100*t.discount,"% off: - \xa3").concat((t.discount*t.amount).toFixed(2)),c="Total price: \xa3".concat((t.price*t.amount-t.discount*t.amount).toFixed(2))):(e="(No offers available)",c="Total price: \xa3".concat((t.price*t.amount).toFixed(2))),Object(u.jsx)("li",{className:W.a["cart-item"],children:Object(u.jsxs)("div",{className:W.a["cart-box"],children:[Object(u.jsx)("h2",{children:t.name}),Object(u.jsxs)("div",{className:W.a.summary,children:[Object(u.jsxs)("div",{className:W.a.summarybox,children:[Object(u.jsx)("span",{className:W.a.price,children:n}),Object(u.jsx)("span",{className:W.a.discountedTotal,children:e}),Object(u.jsx)("span",{className:W.a.totalCost,children:c})]}),Object(u.jsxs)("span",{className:W.a.amount,children:["x ",t.amount]})]})]})})},X=c(8),Q=c.n(X),Y=function(t){var e;return 0!==t.discount&&(e="".concat(t.name," ").concat(100*t.discount,"% off: - \xa3").concat((t.discount*t.amount).toFixed(2))),Object(u.jsx)("li",{className:Q.a["d-cart-item"],children:Object(u.jsx)("div",{className:Q.a["d-cart-box"],children:Object(u.jsx)("div",{className:Q.a.summarybox,children:Object(u.jsx)("span",{className:Q.a.discountedTotal,children:e})})})})},$=function(t){var e=Object(i.useContext)(_),c=e.totalAmount.toFixed(2),n=Object(i.useState)(c),a=Object(s.a)(n,2),o=a[0],r=a[1],d=Object(i.useState)(!0),m=Object(s.a)(d,2),l=m[0],j=m[1],b=e.items.length>0,x=Object(u.jsx)("ul",{className:K.a["cart-items"],children:e.items.map((function(t){return Object(u.jsx)(L,{name:t.name,amount:t.amount,price:t.price,discount:t.discount},t.id)}))}),p=Object(u.jsx)("ul",{className:K.a["cart-items"],children:e.items.map((function(t){return Object(u.jsx)(Y,{name:t.name,amount:t.amount,price:t.price,discount:t.discount},t.id)}))}),h=Object(u.jsx)("ul",{className:K.a["cart-items"],children:Object(u.jsx)("li",{className:K.a["d-cart-item"],children:Object(u.jsx)("div",{className:K.a["d-cart-box"],children:Object(u.jsx)("div",{className:K.a.summarybox,children:Object(u.jsx)("span",{className:K.a.discountedTotal,children:"(No offers available)"})})})})});console.log("cartCtx.items: ",e.items);return Object(u.jsxs)(G,{onClose:t.onClose,children:[x,function(){console.log("Checking for discounts");for(var t=0;t<e.items.length;t++)if(0!=e.items[t].discount)return!0;return!1}()?Object(u.jsx)("div",{children:p}):Object(u.jsx)("div",{children:h}),Object(u.jsx)("div",{className:K.a.voucher,children:b&&Object(u.jsx)("button",{className:K.a.discountVoucher,onClick:function(){l&&r((o-.5).toFixed(2)),j(!1)},children:"Apply Discount Token"})}),Object(u.jsxs)("div",{className:K.a.total,children:[Object(u.jsx)("span",{children:"Total Amount"}),Object(u.jsxs)("span",{children:["\xa3",o]})]}),Object(u.jsxs)("div",{className:K.a.actions,children:[Object(u.jsx)("button",{className:K.a["button--alt"],onClick:t.onClose,children:"Close"}),b&&Object(u.jsx)("button",{className:K.a.button,children:"Buy"})]})]})},tt=c(20),et={items:[],totalAmount:0},ct=function(t,e){if("ADD"===e.type){var c,n=t.totalAmount+(e.item.price-e.item.discount*e.item.amount)*e.item.amount,a=t.items.findIndex((function(t){return t.id===e.item.id})),s=t.items[a];if(s){var i=Object(A.a)(Object(A.a)({},s),{},{amount:s.amount+e.item.amount});(c=Object(tt.a)(t.items))[a]=i}else c=t.items.concat(e.item);return{items:c,totalAmount:n}}return et},nt=function(t){var e=Object(i.useReducer)(ct,et),c=Object(s.a)(e,2),n=c[0],a=c[1],o={items:n.items,totalAmount:n.totalAmount,addItem:function(t){a({type:"ADD",item:t})},removeItem:function(t){a({type:"REMOVE",id:t})}};return Object(u.jsx)(_.Provider,{value:o,children:t.children})};var at=function(){var t=Object(i.useState)(!1),e=Object(s.a)(t,2),c=e[0],n=e[1];return Object(u.jsxs)(nt,{children:[c&&Object(u.jsx)($,{onClose:function(){n(!1)}}),Object(u.jsx)(p,{onShowCart:function(){n(!0)}}),Object(u.jsx)("main",{children:Object(u.jsx)(E,{})})]})};a.a.render(Object(u.jsx)(at,{}),document.getElementById("root"))}],[[27,1,2]]]);
//# sourceMappingURL=main.d61dc616.chunk.js.map